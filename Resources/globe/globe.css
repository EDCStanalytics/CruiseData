:root {
    --cp1: #d4ac63;
    --cp2: #cd2435;
    --cp3: #e56335;
    --cp4: #2b4d7d;
    --cp5: #f4f5f7;  
    --instrument-rim: 8px;
    --rim-base: #b78a3d;
    --rim-shadow: #7a5c2b;
    --rim-highlight: #f8e6b6;
    --rim-reflect1: #caa35a;
    --rim-reflect2: #d9b978;   
    --brass-base: #c4933a;
    --brass-mid: #d9b15b;
    --brass-deep: #7a5c2b;
    --brass-hi: #fff1c2; 
    --odometerFontSize: 6rem;
    --odometerFontWidth: 1.2ch;
    --rim-band: 15%;
    --focus-offset-y: 60px;
}

* {
    font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
}

i {
    font-size: xx-large;
    color: var(--cp5);
    line-height: 1.5rem;
    margin: 0px 10px 0px 10px;
}

body {
    height: 100%;
    box-sizing: border-box;
    margin: 0;
    display: grid;
    grid-template-areas: 
        "gridHeaderArea"
        "gridBodyArea"
    ;
    grid-template-rows: auto 1fr;
    grid-template-columns: 100%;
}

header {
    grid-row: gridHeaderArea;
    grid-column: 1;
    background-color: var(--cp4);
    height: 1.25rem;
    width: 100%;
    position: sticky;
    top: 0;
    left: 0px;
    border-bottom: 2px solid var(--cp3);
    padding-bottom: 1rem;
    padding-top: 1.25rem;
    display: inline-flex;
    justify-content: space-between;
    z-index: 100;
    align-items: center;
}

header h1 {
    margin: 0px 0px 0px 0px;
    color: var(--cp5);
    font-variant: small-caps;
    size: 1.5rem;
    
}
 
header nav {
    margin-left: auto; 
}
 
#navBarItems {
    display: flex;
    border-width: 5px;
    justify-content: space-around;
    height: 40px;
    align-items: center;
    margin: 0px;
}

#navBarItems li {
    position: relative;
    margin: 0px 15px;
    color: var(--cp5);
    border: 3px solid transparent;  
    list-style-type: none;
    transition: all 500ms ease-in-out 100ms;
}
 
#navBarItems li::before {
    content: '';
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    border-bottom: 3px solid transparent; /* Initial transparent border for pseudo-element */
    transform: scale(0, 1);
    transform-origin: left;
    transition: transform 0.5s ease, border-color 0.8s ease;content: '';
}
 
#navBarItems li:hover::before, #navBarItems li.selectedNavItem::before {
        border-color: var(--cp3);
        transform: scale(1, 1); 
    }

body {
    margin: 0px;
    overflow-x: hidden;
    box-sizing: border-box;
}

#earth {
    grid-row: gridBodyArea;
    grid-column: 1;
    display: flex;
    width: 100%;
    position: relative;
    box-sizing: border-box;
}

#dataSpace {
    grid-row: gridBodyArea;
    grid-column: 1;
    z-index: 1;
    display:flex;
    flex-direction: column;
    justify-content: space-between;
}

#berthSpace {
    display: inline-flex;
    justify-content: space-around;
    height: 30px;
    width: 100%;
    
}

#cardSpace {
    align-items: center;
    display: inline-flex;
    justify-content: space-around;
    width: 100%;
    flex: 2;
    transition: flex 500ms ease;
}

#cardSpace.collapsed {
    flex: 0; /* Shrinks to zero height */
    overflow: hidden; /* Hide content */
}

.poiLabel {
  paint-order: stroke;
  stroke: rgba(0,0,0,0.55);
  stroke-width: 2px;
  font-weight: 600;
  opacity: 1;
}

#D3andME {
    flex: 3;
    display: inline-flex;
    justify-content: space-around;
    align-items: center;
    width: 100%;

    container-type: size;
}

.kpiBucket {
    container-type: size;
    --bucket-h: 0px;

    padding: var(--instrument-rim);
    height: 90%;
    justify-self: center;
    border-radius: 50%;
    aspect-ratio: 1/1;
    overflow: visible;
    margin: 25px;
    position: relative;
    transition: 
      transform 500ms ease-in-out, 
      opacity 500ms ease-in-out;
    transform: scale(1);
    will-change: transform;
    display: flex;
    flex-direction: column;
    justify-content: center;
    align-items: center;

    background-blend-mode: normal, screen, multiply, normal;

    background: radial-gradient(closest-side, #fbfbfb 0%, #ededed 55%, #dddddd 100%) content-box;
 
    background-clip: content-box;
    
    border-radius: 50%;
    box-shadow: 
        0 8px 20px rgba(0,0,0,0.35),
        inset 0 0 0 2px rgba(255,255,255,0.15),
        inset 0 -6px 12px rgba(0,0,0,0.35);

}


.kpiBucket::before {
    content: "";
    position: absolute;
    inset: 0;                 
    border-radius: 50%;
    pointer-events: none;
    z-index: 1;               

    background:   
        conic-gradient(
            from 18deg,
            transparent 0deg 24deg,
            var(--brass-hi) 30deg,
            transparent 36deg 210deg,
            var(--brass-hi) 216deg,
            transparent 222deg 360deg
        ),

        conic-gradient(
            from 90deg,
            var(--brass-mid) 0deg,
            var(--brass-base) 60deg,
            var(--brass-deep) 120deg,
            var(--brass-mid) 180deg,
            var(--brass-base) 240deg,
            var(--brass-deep) 300deg,
            var(--brass-mid) 360deg
        ),

        linear-gradient(
            to bottom,
            rgba(0,0,0,0.15),
            rgba(0,0,0,0.05) 20%,
            rgba(255,255,255,0.22) 50%,
            rgba(0,0,0,0.06) 80%,
            rgba(0,0,0,0.18)
        );

    background-clip: border-box;
    background-blend-mode: screen, multiply, normal;
    -webkit-mask:
        radial-gradient(closest-side, transparent calc(100% - var(--instrument-rim)), black 0);
    mask:
        radial-gradient(closest-side, transparent calc(100% - var(--instrument-rim)), black 0);
}


.glass {
  display: none;
}

.kpiBucket.focused {
    transform: scale(1);
    aspect-ratio: 1 / 1;
    z-index: 10;
    flex-direction: column;
    justify-content: center;
    align-items: center;
}

.kpiBucket.focused .baseStats {
  --base-offset-y: 0px;
  --rotor-scale: 0.38;
}

.kpiBucket.shrunk {
    transform: scale(.25);
    opacity: 0.0;
}



/* my code recommendation: */
/* Rotor anchored at bucket center; allow fade-in via opacity */
.baseStats {
  position: absolute;
  left: 50%;
  top: 50%;
  transform-origin: center center;
  transform:
    translate(-50%, -50%)
    translate(var(--rotor-x, 0px),
              calc(var(--base-offset-y, 0px) + var(--rotor-y, 0px)))
    scale(var(--rotor-scale, 1));
  display: flex;
  flex-direction: column;
  align-items: center;

  /* add opacity transition */
  opacity: 1;
  transition: transform 500ms ease-in-out, opacity 750ms ease;
  backface-visibility: hidden;
}



.trendingBox {
    display: flex;
    flex-wrap: nowrap;
    align-items: center;
    justify-content: center;
    gap: 0.25rem;
    min-width: 0;
}

#shipCallKPIs {
    display: flex;
}

.speedRead {
    display: inline-flex;
    gap: 0.15rem;
    align-items: center;
    color: var(--kpi-fg, #0f172a);
    font-weight: 700;
    font-size: var(--odometerFontSize); /* tune as needed */
    line-height: 1rem;
    text-align: center;
    }

.speedRead .digit {
    position: relative;
    overflow: hidden;
    line-height: 1;
    width: var(--odometerFontWidth);
    height: 1em;
    background: var(--kpi-bg, #f8fafc);
    border-radius: 0.25rem;
    box-shadow: inset 0 0 0 1px rgba(15,23,42,0.08);
}

.speedRead .digit .stack {
display: flex;
flex-direction: column;
  position: absolute;
  left: 0; top: 0;
  width: 100%;
  transition: transform 1200ms ease; /* smooth roll */
  will-change: transform;
}

.speedRead .digit .stack span {
  display: flex;
  align-items: center;
  justify-content: center;
  height: 1em;                              /* equal to digit container height */
  text-align: center;
  line-height: 1;
  padding-block: 0rem;
  font-family: 'Inter', 'Roboto Mono', 'IBM Plex Mono', system-ui, sans-serif;
  
font-variant-numeric: tabular-nums;
   font-feature-settings: 'tnum' 1

}

/* Optional: commas for thousands */
.speedRead .sep {
  width: 1ch;
  text-align: center;
  color: #94a3b8;                              /* slate-400 */
}

/* Optional: leading zeros look faint until animated in */
.speedRead .digit.is-leading .stack {
  opacity: 0.45;
}


.baseLabel {
  font-weight: 300;
  font-size: clamp(0.9rem, 1.4vw, 1.1rem);
  color: var(--kpi-fg, #0f172a);
}


.baseTrend {
    flex: 0 1 auto;
    white-space: nowrap;
    min-width: 0;
    font-size: clamp(1rem, 1.6vw, 1.4rem);
    font-family: Impact, Haettenschweiler, 'Arial Narrow Bold', sans-serif;
    margin: 0px 5px;
    color: var(--kpi-fg, #0f172a);
}

#leftChartContainer::after {
    content: '';
    position: absolute;
    top: 50%;
    left: 50%;
    width:0;
    height: 0;
    overflow: visible;
    pointer-events: none;
}

#leftRadialChart, #rightRadialChart {
    position: absolute;
    inset: 0;
    overflow: visible;
}


#rightRadialChart .power-stay {
  stroke: var(--brass-mid, #b78a3d);
  stroke-width: 2px;
  vector-effect: non-scaling-stroke;
  stroke-linecap: round;
}

#rightRadialChart .power-conn {
  stroke: var(--cp3, #e56335);
  stroke-width: 3px;
  vector-effect: non-scaling-stroke;
  stroke-linecap: round;
}


/* Base appearance (keep lines visible and crisp) */
#rightRadialChart .power-stay {
  stroke: var(--brass-mid, #b78a3d);
  stroke-width: 2px;
  vector-effect: non-scaling-stroke;
  stroke-linecap: round;
}

#rightRadialChart .power-conn {
  stroke: var(--cp3, #e56335);
  stroke-width: 3px;
  vector-effect: non-scaling-stroke;
  stroke-linecap: round;
}

#rightRadialChart .power-hit {
  pointer-events: all;
  cursor: pointer;
  stroke: transparent;          /* invisible but hoverable */
  stroke-width: 12px;           /* forgiving hit width */
  stroke-opacity: 0;
}

/* Hover state — call out the item */
#rightRadialChart g.power-item:hover .power-stay {
  stroke: var(--cp4, #2b4d7d);  /* accent color on hover */
  stroke-width: 4px;
  filter: drop-shadow(0 0 2px rgba(0,0,0,0.25));
}

#rightRadialChart g.power-item:hover .power-conn {
  stroke-width: 5px;            /* emphasize connection line */
  filter: drop-shadow(0 0 2px rgba(0,0,0,0.25));
}

/* Faint highlight of the angular slot on hover */
#rightRadialChart g.power-item:hover .power-hit {
  stroke: currentColor;         /* uses inherited color if desired */
  stroke-opacity: 0.12;         /* subtle radial highlight */
}

/* my code recommendation: */
#leftRadialChart .month-bg.even,
#rightRadialChart .month-bg.even {
  fill: rgba(123, 94, 44, 0.10);   /* subtle warm tint */
}

#leftRadialChart .month-bg.odd,
#rightRadialChart .month-bg.odd {
  fill: rgba(40, 80, 120, 0.08);   /* subtle cool tint */
}

/* Ensure backgrounds sit under lines/arcs visually */
#leftRadialChart .month-bg,
#rightRadialChart .month-bg {
  pointer-events: none;            /* not hoverable */
}


#leftCentralChart, #rightCentralChart {
  position: absolute;
  inset: 0;          /* fill the bucket; SVG will be centered via viewBox */
  overflow: visible;
  pointer-events: none;
  height: auto;
  min-height: 200px;
}

#rightChartContainer::after {
    content: '';
    position: absolute;
    top: 50%;
    left: 50%;
    width:0;
    height: 0;
    overflow: visible;
    pointer-events: none;
}

#rightCentralChart .call-span {
  stroke: var(--brass-mid, #b78a3d);
  stroke-width: 1px;              
  vector-effect: non-scaling-stroke;
  stroke-linecap: round;          
}

#rightCentralChart g.call .call-span.multi-day {
  stroke: var(--cp2, #cd2435);   /* red */
  stroke-width: 3px;             /* slightly bolder for visibility */
}


#rightCentralChart .call-90 {
  stroke: var(--brass-mid, #b78a3d);
  stroke-width: 1px;
  vector-effect: non-scaling-stroke;
  stroke-linecap: round;
}


#rightCentralChart .power-span {
  stroke: var(--cp3, #e56335);
  stroke-width: 2px;        
  vector-effect: non-scaling-stroke;
  stroke-linecap: round;
}

#rightCentralChart .month-sep {
  stroke: var(--ink-300, #999);
  stroke-width: 1px;
}



/* my code recommendation: */
#rightCentralChart .glass { pointer-events: none; } /* so hover reaches the lines */

#rightCentralChart g.call .call-span {
  stroke: var(--brass-mid, #b78a3d);
  stroke-width: 1px;
  vector-effect: non-scaling-stroke;
  stroke-linecap: round;
}

#rightCentralChart g.call .power-span {
  stroke: var(--cp3, #e56335);
  stroke-width: 3px;
  vector-effect: non-scaling-stroke;
  stroke-linecap: round;
}

#rightCentralChart g.call .call-90 {
  stroke: var(--brass-mid, #b78a3d);
  stroke-width: 1px;
  vector-effect: non-scaling-stroke;
  stroke-linecap: round;
}

#rightCentralChart g.call .hit-span {
  stroke: #000;
  stroke-width: 12px;         /* wide, forgiving */
  stroke-opacity: 0;          /* invisible but hoverable */
  vector-effect: non-scaling-stroke;
  stroke-linecap: round;
  pointer-events: auto;
  cursor: pointer;
}

/* === Hover state: make it unambiguous which call is hot === */
#rightCentralChart g.call:hover .hit-span {
  stroke-opacity: 0.15;       /* faint highlight of the hover column */
}

#rightCentralChart g.call:hover .call-span {
  stroke-width: 3px;
  stroke: var(--cp4, #2b4d7d); /* contrasts with brass */
  filter: drop-shadow(0 0 2px rgba(0,0,0,0.25));
}

#rightCentralChart g.call:hover .power-span {
  stroke-width: 5px;          /* emphasize connection if present */
  filter: drop-shadow(0 0 2px rgba(0,0,0,0.25));
}

#rightCentralChart g.call:hover .call-90 {
  stroke-width: 2px;
}


/* my code recommendation: */
/* Right gauge styles */
#rightRadialChart .gauge-track { pointer-events: none; }
#rightRadialChart .gauge-value { pointer-events: none; }
#rightRadialChart .gauge-label { font-weight: 600; }

/* my code recommendation: */
/* Right radial gauge styles */
#rightRadialChart .conn-gauge .gauge-tick.minor {
  stroke: rgba(0,0,0,0.25);
  stroke-width: 1px;
  vector-effect: non-scaling-stroke;
}

#rightRadialChart .conn-gauge .gauge-tick.major {
  stroke: var(--brass-deep, #7a5c2b);
  stroke-width: 2px;
  vector-effect: non-scaling-stroke;
}

#rightRadialChart .conn-gauge .gauge-label {
  fill: var(--brass-deep, #7a5c2b);
  font-size: 10px;
  font-weight: 600;
}

#rightRadialChart .conn-gauge .gauge-needle {
  stroke: var(--cp4, #2b4d7d);
  stroke-width: 2.5px;
  vector-effect: non-scaling-stroke;
  stroke-linecap: round;
  filter: drop-shadow(0 0 2px rgba(0,0,0,0.25));
}

#rightRadialChart .conn-gauge .gauge-hub {
  fill: var(--brass-mid, #b78a3d);
  stroke: var(--brass-deep, #7a5c2b);
  stroke-width: 1px;
}

#rightRadialChart .conn-gauge .gauge-readout {
  fill: var(--cp4, #2b4d7d);
  font-size: 11px;
  font-weight: 600;
}

/* my code recommendation: */
#rightRadialChart .conn-gauge { --gauge-minor: rgba(0,0,0,0.25); }
#rightRadialChart .conn-gauge .gauge-tick.minor { stroke: var(--gauge-minor); }
#rightRadialChart .conn-gauge .gauge-rail { fill: var(--gauge-minor); }


/* Probe dots inside each bucket */
.kpiBucket .probe-dot {
  position: absolute;
  width: 8px;
  height: 8px;
  border-radius: 50%;
  background: #1e90ff;           /* little blue dot */
  box-shadow: 0 0 2px rgba(0,0,0,0.25);
  transform: translate(-50%, -50%);
  pointer-events: none;
  z-index: 25;                    /* above chart lines, below glass (z:20) if needed */
}

/* Publishing toggle: add .hide-probes on the bucket to hide all dots */
.kpiBucket.hide-probes .probe-dot {
  display: none;
}




/* Programmatic states (optional) */
.baseStats.rotor.is-hidden {
  opacity: 0;
  pointer-events: none;
}

.baseStats.rotor.is-shrunk {
  /* Use your CSS variables—not inline transforms */
  --rotor-scale: 0.25;
}






/* my code recommendation: */
.baseStats.is-hidden {
  opacity: 0;
  pointer-events: none;
}



/* my code recommendation: */
/* Universal rotor pill: shared structure + style */
.baseStats .speedRead { position: relative; }

.baseStats .speedRead .int {
  position: relative;           /* anchor for absolute-positioned pill */
  display: inline-flex;         /* group only integer digits */
  gap: 0.15rem;                 /* match digit spacing */
}

.baseStats .speedRead .magnitudeTag {
  position: absolute;
  left: 50%;
  transform: translateX(-50%);
  bottom: -0.80em;              /* slight overlap below integer digits */
  display: inline-block;
  white-space: nowrap;
  padding: 0.15em 0.25em;
  border-radius: 0.25rem;
  line-height: 1;
  font-weight: 500;
  font-size: clamp(0.55rem, 1.2vw, 0.95rem);
  color: var(--kpi-bg, #f8fafc);   /* inverted scheme for contrast */
  background: var(--kpi-fg, #0f172a);
  box-shadow: 0 0 0 1px rgba(15,23,42,0.08);
  pointer-events: none;
  z-index: 30;
}


/* my code recommendation: */
/* Generic: invert colors for any fractional (decimal) digit */
.baseStats .speedRead .digit.is-frac {
  background: var(--kpi-fg, #0f172a);
}
.baseStats .speedRead .digit.is-frac .stack span {
  color: var(--kpi-bg, #f8fafc);
}


.baseStats .baseLabel {
  display: none !important;
}



/* my code recommendation: */
/* Let each rolling row be an anchor for the dot overlay */
.baseStats .speedRead .digit .stack span {
  position: relative;         /* anchor pseudo-elements */
  line-height: 1;             /* your existing baseline */
}

/* Baseline-aligned dot: inline text, overlaid so it doesn't change spacing */
.baseStats .speedRead .digit.is-frac .stack span::before {
  content: ".";               /* use a glyph so it shares the text baseline */
  position: absolute;         /* overlay (do not consume horizontal space) */
  left: 0;                    /* anchor at the left edge of the row */
  bottom: 0;                  /* align to the row’s baseline at the bottom */

  /* shift the dot inside the digit box without affecting spacing */
  transform: translateX(-0.05ch); /* move into the box; tune -0.30..-0.40ch */
  /* IMPORTANT: transform, not margin; margin would affect layout widths */

  /* visual style (smaller than numeral, inverted like fractional text) */
  font-size: 0.7em;          /* smaller dot */
  font-weight: 400;
  color: var(--kpi-bg, #f8fafc);  /* same as fractional numeral color */
  pointer-events: none;
  z-index: 2;
}




/* Solid needle-color circle with metallic rim — behind the digits at probe 2 or 4 */
.kpiBucket .baseStats[data-probe="2"] .speedRead::before,
.kpiBucket .baseStats[data-probe="4"] .speedRead::before {
  content: "";
  position: absolute;
  left: 50%;
  top: 50%;
  transform: translate(-50%, -50%);

  /* TRUE circle: width == height; sized off your 3-digit rotor width */
  width: calc(3 * var(--odometerFontWidth) + .5em);
  height: calc(3 * var(--odometerFontWidth) + .5em);
  border-radius: 50%;

  /* OPAQUE fill = needle color */
  background-color: #081a32;     /* same color you use for the needle */
  background-image: none;
  background-blend-mode: normal;

  /* Metallic rim via shadows (no reflow) */
  box-shadow:
    0 0 0 2px var(--brass-base, #c4933a),
    0 0 0 4px var(--brass-deep, #7a5c2b),
    inset 0 0 0 1px rgba(255,255,255,0.25);

  /* Crucial: draw behind the digits within .speedRead */
  z-index: -1;
  pointer-events: none;
}

